name: mtgenv
channels:
  - pytorch
  - conda-forge
  - defaults

dependencies:
  # Python version
  - python>=3.11

  # PyTorch pinned with matching CUDA to avoid op mismatches
  # Note: Unsloth only supports PyTorch 2.5.x (as of Oct 2025)
  - pytorch::pytorch=2.5.1
  - pytorch::pytorch-cuda=12.1
  - pytorch::torchvision=0.20.1
  - pytorch::torchaudio=2.5.1
  
  # Core ML/AI frameworks
  - conda-forge::transformers
  - conda-forge::datasets
  - conda-forge::accelerate
  - conda-forge::peft
  
  # Training utilities
  - conda-forge::wandb
  - conda-forge::deepspeed
  
  # Additional dependencies via pip (not available or better via pip)
  - pip
  - pip:
    - trl<0.9.0
    - bitsandbytes
    - "unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git"
    - unsloth_zoo

